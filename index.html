<!DOCTYPE html>
<html>
  <head>
    <title>WhatsApp Detection</title>
  </head>
  <body>
    <div id="message"></div>
    <div>
      <p>Hello 1.2</p>
    </div>
    <script type="text/javascript">
      async function openWhatsApp() {
        return new Promise((resolve, reject) => {
          const start = Date.now();
          const iframe = document.createElement('iframe');
          iframe.style.display = 'none';
          iframe.src = 'whatsapp://';
          document.body.appendChild(iframe);

          const timeout = setTimeout(() => {
            // If the app was not opened in time, reject the promise
            reject('WhatsApp is not installed.');
          }, 1500);

          // Check if WhatsApp was opened
          setTimeout(() => {
            const elapsed = Date.now() - start;
            if (elapsed < 1500) {
              clearTimeout(timeout);
              resolve('WhatsApp is installed.');
            }
          }, 50); // This is a simple delay before resolving the promise

          setTimeout(() => {
            document.body.removeChild(iframe);
          }, 2000); // Clean up the iframe after some time
        });
      }

      async function checkWhatsApp() {
        const messageDiv = document.getElementById('message');

        try {
          const result = await openWhatsApp();
          messageDiv.innerText = result;
          // Continue with further actions if WhatsApp is installed
        } catch (error) {
          messageDiv.innerText = error;
          // Handle the case where WhatsApp is not installed
        }
      }

      checkWhatsApp();
    </script>
  </body>
</html>
